function initialize(){var e=document.getElementById("city"),t=document.getElementById("footer-modal-popup-form-city");$(".pac-container").addClass("laggayi"),setTimeout((function(){$(".pac-container").each((function(e){$(this).addClass("pac-container_"+e)}))}),300);var s={componentRestrictions:{country:"in"}},a=new google.maps.places.Autocomplete(t,s);a.addListener("place_changed",(function(){for(var e=a.getPlace(),t=null,s=0;s<e.address_components.length;s++)if(e.address_components[s].short_name,"PB"===e.address_components[s].short_name){t=e.address_components[s].short_name;break}$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="_token"]').attr("content")}}),$(".loaderon-allmodal").show();var o=$("#fmpfcheckval").val();$.ajax({url:"/getpopuplocationcity",type:"POST",data:{lat:e.geometry.location.lat(),lng:e.geometry.location.lng(),state:t,csmode:o},success:function(e){var t=e.split("~||~");$("#footer-modal-popup-form-location").html(""),$("#footer-modal-popup-form-location").html(t[1]),$("#footer-modal-popup-form-location").selectpicker("refresh"),$(".loaderon-allmodal").hide()}})}));var o=new google.maps.places.Autocomplete(e,s);o.addListener("place_changed",(function(){for(var e=o.getPlace(),t=null,s=0;s<e.address_components.length;s++)if(e.address_components[s].short_name,"PB"===e.address_components[s].short_name){t=e.address_components[s].short_name;break}var a=$("#counseling_mode").val();$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="_token"]').attr("content")}}),$(".newModeCheck").css("display","block"),$(".in_office_div").css("display","none"),$(".schedule_div").css("display","none"),$("#counseling_mode").attr("disabled",!1),$("#counseling_mode").selectpicker("val",[""]),$("#counseling_mode_type").selectpicker("val",[""]),$(".loaderon-loagingcity").show(),$.ajax({url:"/getlocationcity",type:"POST",data:{lat:e.geometry.location.lat(),lng:e.geometry.location.lng(),csmode:a,state:t},success:function(e){var t=e.split("~||~");$("#nearestlocation").html(""),$("#nearestlocation").html(t[1]),$("#nearestlocation").selectpicker("refresh"),"iApply"==$("#nearestlocation").val()&&($("#counseling_mode").val(1),$("#counseling_mode").attr("disabled",!0),$("#counseling_mode").selectpicker("refresh"),$(".newModeCheck").css("display","none"),modechange()),$(".loaderon-loagingcity").hide()}})}))}function selectmode(e){$("#counseling_mode option:contains('In Office')").prop("disabled",!1),$("#counseling_mode option[value=1]").prop("selected",!1),"iApply"==e.trim()&&($("#counseling_mode option:contains('In Office')").prop("disabled",!0),$("#counseling_mode option[value=1]").prop("selected",!0)),$("#counseling_mode").selectpicker("refresh")}function modechange(){var e=$("#counseling_mode").val();""!=e&&"undefined"!=e&&null!=e&&(1==e?$(".in_office_div").css("display","block"):($(".in_office_div").css("display","none"),$(".schedule_div").css("display","none")))}function secondFormSubmit(){var e=$("#newotpsub0").val(),t=$("#newotpsub1").val(),s=$("#newotpsub2").val(),a=$("#newotpsub3").val();$(".newenqerrors").html("");var o=0;if(""!=e.trim()&&""!=t.trim()&&""!=s.trim()&&""!=a.trim()||($("#otpsenderro").html("Please enter otp"),o++),o>0)return!1;$("#step2 .loaderon-loagingcity").show(),$("#step2commonerror").html(""),$("#step2commonerror").css("display","none"),$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="_token"]').attr("content")}}),$.ajax({url:"/final-enquire-form-submit",type:"POST",data:$("#enquiryForm_otp").serialize(),success:function(e){1==e?($("#newenquiryForm #step1").removeClass("active"),$("#enquiryForm_otp #step2").removeClass("active"),$("#enquiryForm_final_submit #step3").removeClass("active"),$("#newenquiryForm").css("display","none"),$("#enquiryForm_otp").css("display","none"),$("#enquiryForm_final_submit").css("display","block")):2==e?($("#step2commonerror").html(""),$("#step2commonerror").html("Otp not matched"),$("#step2commonerror").css("display","block")):($("#step2commonerror").html(""),$("#step2commonerror").html("There is issue for submit otp."),$("#step2commonerror").css("display","block")),$("#step2 .loaderon-loagingcity").hide()}})}function FinalFormSubmit(){$(".newenqerrors").html("");var e=0,t=$("#city").val(),s=$("#nearestlocation").val(),a=$("#counseling_mode").val(),o=$("#counseling_mode_type").val(),l=$("#app_date").val(),n=$("#schedule_time").val();if(""==t.trim()&&($("#err_city").html("Please enter city"),e++),""==s.trim()&&($("#err_location").html("Please select canam office"),e++,""==a.trim()&&($("#err_counseling_mode").html("Please select counseling mode"),e++)),""!=s.trim()&&"iApply"!=s&&""==a.trim()&&($("#err_counseling_mode").html("Please select counseling mode"),e++),1!=a.trim()&&"1"!=a.trim()||""==o.trim()&&($("#err_counseling_mode_type").html("Please select connect mode"),e++),""!=o.trim()&&"schedule"==o.trim()&&(""==l&&($("#err_app_date").html("Please select date"),e++),""==n&&($("#err_app_time").html("Please select time"),e++)),e>0)return!1;$("#step3 .loaderon-loagingcity").show(),$.ajax({url:"/enquire-form-submit",type:"POST",data:$("#enquiryForm_final_submit").serialize(),success:function(e){var t=e.split("~||~"),a=new Date,o=new Date,l="05.30 PM".match(/(\d+)\.(\d+) (\w+)/),n=/am/i.test(l[3])?parseInt(l[1],10):parseInt(l[1],10)+12,r=parseInt(l[2],10);o.setHours(n),o.setMinutes(r);var i="";o.getTime()<=a.getTime()&&(i='<p class="text--light text--regular delete--modal--desc ">Virtual counseling is conducted between 10:00 AM - 5:30 PM. Connect with us tomorrow using the same link or wait for us to call you back.</p>'),1==t[0]?($("#requestSendModal .modal-body").html(""),""!=t[1]?"iApply"==s.trim()?$("#requestSendModal .modal-body").html('<div class="queryform-requestSendModal"><div class="mescucf"><img src="/assets/images/success-alert.svg" alt="success icon"><p class="text--dark delete--modal--meassage">Request for Virtual Counseling saved Successfully</p>'+i+'<p class="text--light text--regular delete--modal--desc mb5"><a href="'+t[1]+'">'+t[1]+'</a></p><p class="text--light text--regular delete--modal--desc"><span class="joinnowbtn"><a href="'+t[1]+'" class="button-rounded button-rounded__dark header_menu">Join Now!</a></span></p></div><div class="faiumcutext"><p class="text--light text--regular delete--modal--desc">For any additional information, you may contact us</p></div><div class="contactinfrm"><p class="text--light text--regular delete--modal--desc"><img class="img-fluid" src="/assets/images/tollfreecallicon.svg" alt="tollfreeicon">Toll Free:- <a href="tel:18008901775" target="_blank">1800 890 1775</a></p><p class="text--light text--regular delete--modal--desc"><img class="img-fluid" src="/assets/images/whatsappcallicon.svg" alt="Canam logo"> WhatsApp:- <a href="https://api.whatsapp.com/send?phone=918598000333&amp;text=Hello,%20I%20want%20to%20talk%20to%20your%20counsellors%20to%20start%20with%20the%20study%20abroad%20process." target="_blank">918598000333</a></p></div></div>'):$("#requestSendModal .modal-body").html('<div class="queryform-requestSendModal"><div class="mescucf"><img src="/assets/images/success-alert.svg" alt="success icon"><p class="text--dark delete--modal--meassage">Request for Virtual Counseling saved Successfully</p>'+i+'<p class="text--light text--regular delete--modal--desc mb5"><a target ="_blank" href="'+t[1]+'">'+t[1]+'</a></p><p class="text--light text--regular delete--modal--desc"><span class="joinnowbtn"><a href="'+t[1]+'" class="button-rounded button-rounded__dark header_menu">Join Now!</a></span></p></div><div class="faiumcutext"><p class="text--light text--regular delete--modal--desc">For any additional information, you may contact us</p></div><div class="contactinfrm"><p class="text--light text--regular delete--modal--desc"><img class="img-fluid" src="/assets/images/tollfreecallicon.svg" alt="tollfreeicon">Toll Free:- <a href="tel:18001378055" target="_blank">1800 137 8055</a></p><p class="text--light text--regular delete--modal--desc"><img class="img-fluid" src="/assets/images/whatsappcallicon.svg" alt="Canam logo"> WhatsApp:- <a href="https://api.whatsapp.com/send?phone=918968300000&amp;text=Hello,%20I%20want%20to%20talk%20to%20your%20counsellors%20to%20start%20with%20the%20study%20abroad%20process." target="_blank">918968300000</a></p></div></div>'):"iApply"==s.trim()?$("#requestSendModal .modal-body").html('<div class="queryform-requestSendModal"><div class="mescucf"><img src="/assets/images/success-alert.svg" alt="success icon"><p class="text--dark delete--modal--meassage">Your information have been submitted successfully</p><p class="text--light text--regular delete--modal--desc">We will connect with you shortly</p></div><div class="faiumcutext"><p class="text--light text--regular delete--modal--desc">For any additional information, you may contact us</p></div><div class="contactinfrm"><p class="text--light text--regular delete--modal--desc"><img class="img-fluid" src="/assets/images/tollfreecallicon.svg" alt="tollfreeicon">Toll Free:- <a href="tel:18008901775" target="_blank">1800 890 1775</a></p><p class="text--light text--regular delete--modal--desc"> <img class="img-fluid" src="/assets/images/whatsappcallicon.svg" alt="Canam logo">WhatsApp:- <a href="https://api.whatsapp.com/send?phone=918598000333&amp;text=Hello,%20I%20want%20to%20talk%20to%20your%20counsellors%20to%20start%20with%20the%20study%20abroad%20process." target="_blank">918598000333</a></p></div></div>'):$("#requestSendModal .modal-body").html('<div class="queryform-requestSendModal"><div class="mescucf"><img src="/assets/images/success-alert.svg" alt="success icon"><p class="text--dark delete--modal--meassage">Your information have been submitted successfully</p><p class="text--light text--regular delete--modal--desc">We will connect with you shortly</p></div><div class="faiumcutext"><p class="text--light text--regular delete--modal--desc">For any additional information, you may contact us</p></div><div class="contactinfrm"><p class="text--light text--regular delete--modal--desc"><img class="img-fluid" src="/assets/images/tollfreecallicon.svg" alt="tollfreeicon">Toll Free:- <a href="tel:18001378055" target="_blank">1800 137 8055</a></p> <p class="text--light text--regular delete--modal--desc"><img class="img-fluid" src="/assets/images/whatsappcallicon.svg" alt="Canam logo">WhatsApp:- <a href="https://api.whatsapp.com/send?phone=918968300000&amp;text=Hello,%20I%20want%20to%20talk%20to%20your%20counsellors%20to%20start%20with%20the%20study%20abroad%20process." target="_blank">918968300000</a></p></div></div>'),$("#newenquiryForm")[0].reset(),$("#enquiryForm_otp")[0].reset(),$("#enquiryForm_final_submit")[0].reset(),$("#requestSendModal").modal("show")):($("#step3commonerror").html(""),$("#step3commonerror").html("There is issue for submit otp."),$("#step3commonerror").css("display","block")),$("#step3 .loaderon-loagingcity").hide()}})}function changeEnquiryNum(){"none"==$(".newphonenumber").css("display")?$(".newphonenumber").css("display","block"):$(".newphonenumber").css("display","none")}function NewcommonResend(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="_token"]').attr("content")}}),$.ajax({url:"/new-common-resend",type:"POST",data:{page_name:$("#page_name").val()},success:function(e){$("#otpsenderro").html(""),1==e?($("#otpsenderro").html("Otp has been send successfully"),$("#otpsenderro").removeClass("text--red"),$("#otpsenderro").addClass("text--green"),$("#otpsenderro").removeClass("hidden")):($("#otpsenderro").css("color","red"),$("#otpsenderro").html("Invalid OTP"),$("#otpsenderro").removeClass("hidden"))}})}function updateChangeNum(){var e=$("#enq_newphonenumber").val();if($("#phone_updterror").html(""),$("#phone_updterror").css("display","none"),$("#phone_numberupdtscs").css("display","none"),""==e.trim())return $("#phone_updterror").html("Please enter phone number"),$("#phone_updterror").css("display","block"),!1;$.ajax({url:"/update-phone-number",type:"POST",data:{page_name:$("#page_name").val(),newnum:$("#enq_newphonenumber").val()},success:function(t){if($("#otpsenderro").html(""),1==t){var s=$("#newenquiryForm #email").val(),a=e.replace(e.substring(1,5),"****"),o=s.replace(s.substring(1,3),"***");$(".enqOtpmsg").html(""),$(".enqOtpmsg").html('Please enter the verification code send to <span class="text--dark text--medium">'+a+' </span> & <span class="text--dark text--medium">'+o+"</span>"),$("#phone_numberupdtscs").html("Otp has been send successfully"),$("#phone_numberupdtscs").css("display","block")}else $("#phone_updterror").html("There is issue for sending otp"),$("#phone_updterror").css("display","block")}})}function show_virtual_option(){var e=$("#counseling_mode_type").val();""!=e&&"undefined"!=e&&null!=e&&("schedule"==e?$(".schedule_div").css("display","block"):$(".schedule_div").css("display","none"))}google.maps.event.addDomListener(window,"load",initialize),$(document).ready((function(){$("#newenquiryForm").validate({rules:{name:"required",email:{required:!0,validate_email:!0},mobile:{required:!0,mobileValidation:$("#mobile").val()},nearestlocation:"required",prefference:"required",pref_intake:"required",counseling_mode:"required",agree:"required"},messages:{name:{required:"Please enter Full name"},email:{required:"Please enter valid Email"},mobile:{required:"Please enter Mobile"},nearestlocation:{required:"Please select Nearest office"},prefference:{required:"Please select Preferred Country"},pref_intake:{required:"Please select Intake"},counseling_mode:{required:"Please select Mode of Counseling"},agree:{required:"You must agree before submitting."}},errorPlacement:function(e,t){$(t).data("error");"name"==$(t[0]).attr("id")?$("#err_name").append(e):"email"==$(t[0]).attr("id")?$("#err_email").append(e):"mobile"==$(t[0]).attr("id")?$("#err_mobile").append(e):"nearestlocation"==$(t[0]).attr("id")?$("#err_location").append(e):"prefference"==$(t[0]).attr("id")?$("#err_prefference").append(e):"pref_intake"==$(t[0]).attr("id")?$("#err_pref_intake").append(e):"counseling_mode"==$(t[0]).attr("id")?$("#err_counseling_mode").append(e):"invalidCheck"==$(t[0]).attr("id")?$("#err_invalidCheck").append(e):e.insertAfter(t)},submitHandler:function(e){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="_token"]').attr("content")}}),$("#step1 .loaderon-loagingcity").show(),$("#step1commonerror").html(""),$("#step1commonerror").css("display","none"),$.ajax({url:"/new-enquire-form",type:"POST",data:$("#newenquiryForm").serialize(),success:function(e){if($(".fsmt-loder1").css("display","none;"),1==e){var t=$("#newenquiryForm #mobile").val(),s=($("#newenquiryForm #page_name").val(),$("#newenquiryForm #email").val()),a=t.replace(t.substring(1,5),"****"),o=s.replace(s.substring(1,3),"***");$(".enqOtpmsg").html(""),$(".enqOtpmsg").html('Please enter the verification code send to <span class="text--dark text--medium">'+a+' </span> & <span class="text--dark text--medium">'+o+"</span>"),$("#newenquiryForm #step1").removeClass("active"),$("#enquiryForm_otp #step2").addClass("active"),$("#newenquiryForm").css("display","none"),$("#enquiryForm_otp").css("display","block")}else $("#step1commonerror").html("There is error for submit form"),$("#step1commonerror").css("display","block");$("#step1 .loaderon-loagingcity").hide()}})}})})),$("#enquiryForm_otp .form .btn-prev").click((function(){$(".stepper--content").removeClass("active"),$(this).closest(".stepper--content").prev().addClass("active"),$("#newenquiryForm").css("display","block"),$("#enquiryForm_otp").css("display","none")})),$(document).on("keypress input",".otp-input",(function(e){""!=$(this).val()&&"undefined"!=$(this).val()&&null!=$(this).val()&&$(this).next().trigger("focus")})),$("#enq_newphonenumber").on("blur",(function(){var e=$(this).val();return/^\d*(?:\.\d{1,2})?$/.test(e)?10!=e.length?($("#phone_updterror").html("Please put 10  digit mobile number"),$("#phone_updterror").css("display","block"),!1):void 0:($("#phone_updterror").html("Not a valid number"),$("#phone_updterror").css("display","block"),!1)}));